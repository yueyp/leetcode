<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /*
        反转链表
        反转一个单链表。

        示例:

        输入: 1->2->3->4->5->NULL
        输出: 5->4->3->2->1->NULL
        */
        /**
        * Definition for singly-linked list.
        * function ListNode(val) {
        *     this.val = val;
        *     this.next = null;
        * }
        */
        /**
        * @param {ListNode} head
        * @return {ListNode}
        */
        // 利用栈先进后出的特性
        var reverseList = function (head) {
            let stack = []
            let p1 = head
            let l2 = new ListNode(null)
            let p2 = l2
            while (p1) {
                stack.push(p1.val)
                p1 = p1.next
            }
            stack.reverse().map(v => {
                p2.next = new ListNode(v)
                p2 = p2.next
            })
            return l2.next
        };
        // 法二
        /* 在遍历列表时，将当前节点的 next 指针改为指向前一个元素。由于节点没有引用其上一个节点，
          因此必须事先存储其前一个元素。在更改引用之前，还需要另一个指针来存储下一个节点。不要忘记在最后返回新的头引用！
        */
        var reverseList = function (head) {
            let prev = new ListNode(null)
            let curr = head
            while (curr !== null) {
                let nextTemp = new ListNode(curr.next)
                curr.next = prev
                prev = curr
                curr = nextTemp
            }
            return prev
        }
        // 法三
        var reverseList = function (head) {
            //递归终止条件是当前为空，或者下一个节点为空
            if (head === null || head.next === null) return head
            //这里的cur就是最后一个节点
            let cur = new ListNode(reverseList(head.next))
            //如果链表是 1->2->3->4->5，那么此时的cur就是5
            //而head是4，head的下一个是5，下下一个是空
            //所以head.next.next 就是5->4
            head.next.next = head
            //防止链表循环，需要将head.next设置为空
            head.next = null
            //每层递归函数都返回cur，也就是最后一个节点
            return cur
        }
    </script>
</body>

</html>
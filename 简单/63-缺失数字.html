<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
        给定一个包含 0, 1, 2, ..., n 中 n 个数的序列，找出 0 .. n 中没有出现在序列中的那个数。

        示例 1:

        输入: [3,0,1]
        输出: 2
        */
       /**
         * @param {number[]} nums
         * @return {number}
         */
        /*
        首先我们对数组进行排序，随后我们可以在常数时间内判断两种特殊情况：
        0 没有出现在数组的首位，以及 nn 没有出现在数组的末位。
        如果这两种特殊情况都不满足，
        那么缺失的数字一定在 0 和 nn 之间（不包括两者）。
        此时我们可以在线性时间内扫描这个数组，如果某一个数比它前面的那个数大了超过 1，那么这两个数之间的那个数即为缺失的数字。
        */
        var missingNumber = function(nums) {
            nums.sort((a,b) => a - b)
            if(nums[nums.length - 1] != nums.length) return nums.length
            if(nums[0] != 0) return 0
            for(let i = 0; i < nums.length - 1;i++){
                if(nums[i+1] - nums[i] > 1){
                    return nums[i]+1
                }
            }
            return -1
        };
        /*
            方法二，将数组中所有元素放入一个map对象中，再依次遍历0-nums.length之间的数字，若没有找到，则该数为缺失的数字
        */
        var missingNumber = function(nums){
            let data = new Map()
            for(let i = 0; i < nums.length;i++){
                data.set(nums[i])
            }
            for(let i = 0; i <= nums.length;i++){
                if(!data.has(i)){
                    return i
                }
            }
            return -1
        }
        /*
        方法三，我们知道数组中有 nn 个数，并且缺失的数在 [0..n][0..n] 中。
        因此我们可以先得到 [0..n][0..n] 的异或值，再将结果对数组中的每一个数进行一次异或运算。
        未缺失的数在 [0..n][0..n] 和数组中各出现一次，因此异或后得到 0。
        而缺失的数字只在 [0..n][0..n] 中出现了一次，在数组中没有出现，因此最终的异或结果即为这个缺失的数字。
        异或，相异为1，相同为0
        */
       var missingNumber = function(nums){
        let missing = nums.length;
        for (let i = 0; i < nums.length; i++) {
            missing ^= i ^ nums[i];
        }
        return missing;
       }
       /*
       方法四，我们可以用 高斯求和公式 求出 [0..n][0..n] 的和，减去数组中所有数的和，就得到了缺失的数字。
       sum = (n * (n-1))/2
       */
      var missingNumber = function(nums){
        let expectedSum = nums.length*(nums.length + 1)/2;
        let actualSum = nums.reduce((acc,cur) => {
            return acc + cur
        })
        return expectedSum - actualSum;
      }
      /*
      防止溢出求和版本,边加边减
      */
     var missingNumber = function(nums) {
        let sum = 0;
        for (let i = 1; i <= nums.length; i++) {
            sum += i;
            sum -= nums[i - 1];
        }
        return sum;
     }
    </script>
</body>
</html>